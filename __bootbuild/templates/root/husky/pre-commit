#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Pre-commit hook: Run linting and formatting checks
echo "Running pre-commit checks..."

# Run linter if available
if [ -f "package.json" ] && grep -q "\"lint\"" package.json; then
  echo "Running lint..."
  npm run lint || exit 1
fi

# Run formatter check if available
if [ -f "package.json" ] && grep -q "\"format:check\"" package.json; then
  echo "Checking formatting..."
  npm run format:check || exit 1
fi

# Run type checking if available
if [ -f "tsconfig.json" ] && [ -f "package.json" ] && grep -q "\"type-check\"" package.json; then
  echo "Running type check..."
  npm run type-check || exit 1
fi

echo "Pre-commit checks passed!"
